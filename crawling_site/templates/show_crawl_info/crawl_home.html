{% extends "base.html" %}

{% block content %}

<h1>{{ title }}</h1>
<form method='get'>
    <input type='submit' class='btn' value='Update' name='print_btn'>
</form>
<h1>last updated : {{ time }}</h1>

<canvas id="myChart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

<script>
// handle input data from django
var members = [];
var num_solved_prob = [];
var data = {{ results|safe }};
console.log(data);
for (var key in data) {
    let newMember = members.push(key);
    let arrLength = num_solved_prob.push(data[key].length);
}
console.log(members);
console.log(num_solved_prob);

// draw bar graph
var ctx = document.getElementById('myChart').getContext('2d');
var chart = new Chart(ctx, {
// The type of chart we want to create
type: 'line',

// The data for our dataset
data: {
    labels: members,
    datasets: [{
        label: '오늘의 문제 풀이 현황',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: num_solved_prob
    }]
},

// Configuration options go here
options: {}
});

</script>
{% endblock %}